<!doctype html><html lang=en><head><meta charset=utf-8><title>Build virtual machines (VM's) using QEMU - rapatao.com</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=https://www.rapatao.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.rapatao.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.rapatao.com/favicon/favicon-16x16.png><link rel=manifest href=https://www.rapatao.com/favicon/site.webmanifest><link rel=mask-icon href=https://www.rapatao.com/favicon/safari-pinned-tab.svg color=#ffffff><link rel="shortcut icon" href=https://www.rapatao.com/favicon/favicon.ico><meta name=msapplication-config content="/favicon/browserconfig.xml"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.104.2"><meta itemprop=name content="Build virtual machines (VM's) using QEMU"><meta itemprop=description content="Recently I needed to perform some simple tests of an application that only worked on Windows and as I don&rsquo;t have this environment, I decided to create a VM with Windows 10. My first idea was to use VirtualBox , however, for some reason, I couldn&rsquo;t start the installer at all, always generating a random error or else the screen was like the hiss of a TV, but colorful and without sound."><meta itemprop=datePublished content="2020-09-06T21:00:00-03:00"><meta itemprop=dateModified content="2020-09-06T21:00:00-03:00"><meta itemprop=wordCount content="499"><meta itemprop=image content><meta itemprop=keywords content="virtualization,"><meta property="og:title" content="Build virtual machines (VM's) using QEMU"><meta property="og:description" content="Recently I needed to perform some simple tests of an application that only worked on Windows and as I don&rsquo;t have this environment, I decided to create a VM with Windows 10. My first idea was to use VirtualBox , however, for some reason, I couldn&rsquo;t start the installer at all, always generating a random error or else the screen was like the hiss of a TV, but colorful and without sound."><meta property="og:type" content="article"><meta property="og:url" content="https://www.rapatao.com/posts/2020-09/build-virtual-machines-using-qemu/"><meta property="og:image" content="https://www.rapatao.com/images/posts/qemu.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-09-06T21:00:00-03:00"><meta property="article:modified_time" content="2020-09-06T21:00:00-03:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.rapatao.com/images/posts/qemu.jpg"><meta name=twitter:title content="Build virtual machines (VM's) using QEMU"><meta name=twitter:description content="Recently I needed to perform some simple tests of an application that only worked on Windows and as I don&rsquo;t have this environment, I decided to create a VM with Windows 10. My first idea was to use VirtualBox , however, for some reason, I couldn&rsquo;t start the installer at all, always generating a random error or else the screen was like the hiss of a TV, but colorful and without sound."><meta name=twitter:site content="@rapatao"><link rel=stylesheet href=https://www.rapatao.com/css/bundle.min.465c91a755fc5a687079f9888343809dd9305d843e08bb26f421b4b62b4ed6e8.css integrity="sha256-RlyRp1X8WmhwefmIg0OAndkwXYQ+CLsm9CG0titO1ug="><link rel=stylesheet href=https://www.rapatao.com/css/add-on.css><link rel=alternate hreflang=en href=https://www.rapatao.com/posts/2020-09/build-virtual-machines-using-qemu/><link rel=alternate hreflang=pt href=https://www.rapatao.com/pt/posts/2020-09/criando-maquinas-virtuais-utilizando-qemu/></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=https://www.rapatao.com/ class=nav>rapatao.com</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=https://www.rapatao.com/pt/posts/ class="nav link"><i class='far fa-newspaper'></i> Blog</a>
<a href=https://www.rapatao.com/resume/ class="nav link"><i class='far fa-file-alt'></i> Resume</a>
<a href=https://www.rapatao.com/json/ class="nav link"><i class='far fa-file-code'></i> JSON Formatter & Minifier</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=en>en</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=en class="nav link active">English (en)</a>
<a href=https://www.rapatao.com/pt/posts/2020-09/criando-maquinas-virtuais-utilizando-qemu/ lang=pt class="nav link">Português (pt)</a></menu>
<menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU&url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&title=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&title=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&description=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=https://www.rapatao.com/><img src=https://www.rapatao.com/images/avatar-pixel.gif class=square width=100 alt="Luiz H. Rapatão"></a><header><h1>Luiz H. Rapatão</h1></header><main><p>Senior Software Engineer</p></main><footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=https://www.rapatao.com/posts/2020-09/build-virtual-machines-using-qemu/>Build virtual machines (VM's) using QEMU</a></h2></div><div class=meta><time datetime="2020-09-06 21:00:00 -0300 -03">September 6, 2020</time><p>3-Minute Read</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU&url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&title=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&title=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f&description=Build%20virtual%20machines%20%28VM%27s%29%20using%20QEMU" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-09%2fbuild-virtual-machines-using-qemu%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><a href=https://www.rapatao.com/posts/2020-09/build-virtual-machines-using-qemu/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/qemu.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/qemu.jpg alt=QEMU></a><p>Recently I needed to perform some simple tests of an application that only worked on Windows and as I don&rsquo;t have this environment, I decided to create a VM with Windows 10. My first idea was to use <a href=https://www.virtualbox.org/>VirtualBox</a> , however, for some reason, I couldn&rsquo;t start the installer at all, always generating a random error or else the screen was like the hiss of a TV, but colorful and without sound.</p><p>This problem prevented me from proceeding with the installation and almost made me give up on the test I was going to perform, however, I decided to test create a VM using <a href=https://www.qemu.org/>QEMU</a>.</p><p>Although there are interfaces (GUI) to configure VM&rsquo;s for QEMU, I didn&rsquo;t find any of the alternatives I know in Homebrew (<a href=https://github.com/tobimensch/aqemu>aqemu</a>, <a href=https://virt-manager.org/>virt-manager</a>) and to carry out my test, I decided to do the procedure manually.</p><h2 id=what-is-qemu>What is QEMU</h2><p>It can be said that QEMU is an open source, cross-platform application that serves to emulate machines (VM) and virtualize instructions from other platforms, such as, for example, emulating ARM and PowerPC instructions in x86 environments.</p><h2 id=installing-qemu>Installing QEMU</h2><p>Installation can be done in several ways, all of which can be found <a href=https://www.qemu.org/download/>here</a>. In this text, I will describe how to install on macOS using Homebrew and Linux systems, which are based on Debian/Ubuntu.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># macOS</span>
</span></span><span style=display:flex><span>brew install qemu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Debian/Ubuntu</span>
</span></span><span style=display:flex><span>apt-get install qemu
</span></span></code></pre></div><h2 id=creating-an-operating-system-installation-disk>Creating an operating system installation disk</h2><p>We use the <code>qemu-img</code> command for this, for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qemu-img create -f qcow2 windows10.qcow2 30G
</span></span></code></pre></div><p>In the above command, we are creating a file, called <code>windows10.qcow2</code> with 30G. This file will be used to install Windows 10.</p><h2 id=installing-the-operating-system-on-the-created-disk>Installing the operating system on the created disk</h2><p>At this point, we must pay attention to the system that will be virtualized, being necessary to execute the command accordingly. For example, if the installation is Windows 10 64-bit, the command should be <code>qemu-system-x86_64</code>, in case the environment is ARM-based, the command would be: <code>qemu-system-arm</code>.</p><p>For my scenario, I will install Windows 10 64-bit, so the command I will run will be the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qemu-system-x86_64 -hda windows10.qcow2 -m 4G -cdrom ~/Downloads/tibia/Win10_2004_EnglishInternational_x64.iso -boot c
</span></span></code></pre></div><p>In the above command, QEMU will simulate a 64-bit environment, with 4G of RAM, using the file created previously as a disk and the ISO file, <a href=https://www.microsoft.com/pt-br/software-download/windows10ISO>downloaded from Microsoft&rsquo;s website</a>, which contains the installation image, will be presented to the system as if it were a CD.</p><h2 id=booting-the-installed-system>Booting the installed system</h2><p>After the whole procedure, if you do not close QEMU, you will normally access your virtual machine, however, after closed, if you want to access again, just run the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qemu-system-x86_64 -m 4G -hda windows10.qcow2
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>As seen, related to virtualization, there is a free alternative to VirtualBox that can often meet our needs for creating and running virtual machines. Despite its greater complexity, knowing QEMU can be useful for situations where we don&rsquo;t have a friendlier solution to create our VMs.</p><p>To learn more about QEMU, I recommend looking at the official Wiki: <a href=https://wiki.qemu.org/Main_Page>https://wiki.qemu.org/Main_Page</a></p></div><footer><div class=stats><ul class=tags><li><a class=article-terms-link href=https://www.rapatao.com/tags/virtualization/>virtualization</a></li></ul></div></footer></article><article class=post><div id=reaktions></div><script lang=application/javascript defer src=https://reaktions.rapatao.com/reaktions.js></script><noscript>Please enable JavaScript to react with this post</noscript></article><div class=pagination><a href=https://www.rapatao.com/posts/2021-03/thinking-in-graalvm-should-i-use-quarkus-or-micronaut/ class="button left"><span>Thinking in GraalVM? Should I use Quarkus or Micronaut?</span></a>
<a href=https://www.rapatao.com/posts/2020-08/a-list-of-brazilian-projects/ class="button right"><span>A list of Brazilian projects</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><a href=https://www.rapatao.com/posts/2022-08/what-are-flaky-tests-and-why-fix-them/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/flaky-pipeline.png')"><img src=https://www.rapatao.com/images/posts/flaky-pipeline.png alt="What are Flaky Tests and why fix them!"></a><header><h2><a href=https://www.rapatao.com/posts/2022-08/what-are-flaky-tests-and-why-fix-them/>What are Flaky Tests and why fix them!</a></h2><time class=published datetime="2022-08-28 12:00:00 -0300 -03">August 28, 2022</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2022-07/gnupg-how-to-backup-and-restore-your-keys/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-lucas-seebacher-5599449.jpeg')"><img src=https://www.rapatao.com/images/posts/pexels-lucas-seebacher-5599449.jpeg alt="GnuPG: how to backup and restore your keys?"></a><header><h2><a href=https://www.rapatao.com/posts/2022-07/gnupg-how-to-backup-and-restore-your-keys/>GnuPG: how to backup and restore your keys?</a></h2><time class=published datetime="2022-07-31 12:00:00 -0300 -03">July 31, 2022</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2022-04/what-is-a-cdn-cdn-content-delivery-network/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-pixabay-163064.jpeg')"><img src=https://www.rapatao.com/images/posts/pexels-pixabay-163064.jpeg alt="What is a CDN (Content Delivery Network)?"></a><header><h2><a href=https://www.rapatao.com/posts/2022-04/what-is-a-cdn-cdn-content-delivery-network/>What is a CDN (Content Delivery Network)?</a></h2><time class=published datetime="2022-04-21 19:00:00 -0300 -03">April 21, 2022</time></header></article><footer><a href=https://www.rapatao.com/posts/ class=button>See More</a></footer></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2022 rapatao.com<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.104.2 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=https://www.rapatao.com/js/highlight.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://www.rapatao.com/js/bundle.min.294ee8926c7846b7befa87e1420ce7621077417d4ef195df6c7dff2ad2b2915c.js integrity="sha256-KU7okmx4Rre++ofhQgznYhB3QX1O8ZXfbH3/KtKykVw="></script>
<script src=https://www.rapatao.com/js/add-on.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LDJ57WEQPH"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LDJ57WEQPH",{anonymize_ip:!0})}</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8575ea838221496eb4ac5f867d0d5d8f"}'></script></div></body></html data-check="rapatao.com">