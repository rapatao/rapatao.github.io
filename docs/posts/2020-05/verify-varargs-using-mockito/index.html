<!doctype html><html lang=en><head><meta charset=utf-8><title>Verify vararg methods using Mockito - rapatao.com</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=https://www.rapatao.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.rapatao.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.rapatao.com/favicon/favicon-16x16.png><link rel=manifest href=https://www.rapatao.com/favicon/site.webmanifest><link rel=mask-icon href=https://www.rapatao.com/favicon/safari-pinned-tab.svg color=#ffffff><link rel="shortcut icon" href=https://www.rapatao.com/favicon/favicon.ico><meta name=msapplication-config content="/favicon/browserconfig.xml"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.101.0"><meta itemprop=name content="Verify vararg methods using Mockito"><meta itemprop=description content="Building tests is one of the most routine tasks for a developer and normally, with frameworks like jUnit and Mockito, this task tends to be carried out without great difficulties. Despite this, there are certain validations, which tend to be more complex, such as checking calls to methods with parameters of type varargs.
If you don&rsquo;t know what varargs is, you can roughly say that it is, the &ldquo;&mldr;&rdquo; used in parameter declarations in methods, however, I recommend reading [this article](https://www."><meta itemprop=datePublished content="2020-05-14T00:00:00-03:00"><meta itemprop=dateModified content="2020-05-14T00:00:00-03:00"><meta itemprop=wordCount content="550"><meta itemprop=image content><meta itemprop=keywords content="java,mockito,junit,tests,"><meta property="og:title" content="Verify vararg methods using Mockito"><meta property="og:description" content="Building tests is one of the most routine tasks for a developer and normally, with frameworks like jUnit and Mockito, this task tends to be carried out without great difficulties. Despite this, there are certain validations, which tend to be more complex, such as checking calls to methods with parameters of type varargs.
If you don&rsquo;t know what varargs is, you can roughly say that it is, the &ldquo;&mldr;&rdquo; used in parameter declarations in methods, however, I recommend reading [this article](https://www."><meta property="og:type" content="article"><meta property="og:url" content="https://www.rapatao.com/posts/2020-05/verify-varargs-using-mockito/"><meta property="og:image" content="https://www.rapatao.com/images/posts/pexels-christina-morillo-1181244.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-14T00:00:00-03:00"><meta property="article:modified_time" content="2020-05-14T00:00:00-03:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.rapatao.com/images/posts/pexels-christina-morillo-1181244.jpg"><meta name=twitter:title content="Verify vararg methods using Mockito"><meta name=twitter:description content="Building tests is one of the most routine tasks for a developer and normally, with frameworks like jUnit and Mockito, this task tends to be carried out without great difficulties. Despite this, there are certain validations, which tend to be more complex, such as checking calls to methods with parameters of type varargs.
If you don&rsquo;t know what varargs is, you can roughly say that it is, the &ldquo;&mldr;&rdquo; used in parameter declarations in methods, however, I recommend reading [this article](https://www."><meta name=twitter:site content="@rapatao"><link rel=stylesheet href=https://www.rapatao.com/css/bundle.min.465c91a755fc5a687079f9888343809dd9305d843e08bb26f421b4b62b4ed6e8.css integrity="sha256-RlyRp1X8WmhwefmIg0OAndkwXYQ+CLsm9CG0titO1ug="><link rel=stylesheet href=https://www.rapatao.com/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=https://www.rapatao.com/ class=nav>rapatao.com</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=https://www.rapatao.com/pt/posts/ class="nav link"><i class='far fa-newspaper'></i> Blog</a>
<a href=https://www.rapatao.com/resume/ class="nav link"><i class='far fa-file-alt'></i> Resume</a>
<a href=https://www.rapatao.com/json/ class="nav link"><i class='far fa-file-code'></i> JSON Formatter & Minifier</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=en>en</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=en class="nav link active">English (en)</a>
<a href=https://www.rapatao.com/pt/posts/2020-05/verify-varargs-using-mockito/ lang=pt class="nav link">Português (pt)</a></menu>
<menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Verify%20vararg%20methods%20using%20Mockito&url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&title=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&title=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&description=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=https://www.rapatao.com/><img src=https://www.rapatao.com/images/avatar-pixel.gif class=square width=100 alt="Luiz H. Rapatão"></a><header><h1>Luiz H. Rapatão</h1></header><main><p>Senior Software Engineer</p></main><footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=skype:rapatao?userinfo target=_blank rel=noopener title=Skype class="fab fa-skype"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=https://www.rapatao.com/posts/2020-05/verify-varargs-using-mockito/>Verify vararg methods using Mockito</a></h2></div><div class=meta><time datetime="2020-05-14 00:00:00 -0300 -03">May 14, 2020</time><p>3-Minute Read</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Verify%20vararg%20methods%20using%20Mockito&url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&title=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&title=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f&description=Verify%20vararg%20methods%20using%20Mockito" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2020-05%2fverify-varargs-using-mockito%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><a href=https://www.rapatao.com/posts/2020-05/verify-varargs-using-mockito/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-christina-morillo-1181244.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/pexels-christina-morillo-1181244.jpg alt="java code"></a><p>Building tests is one of the most routine tasks for a developer and normally, with frameworks like jUnit and Mockito, this task tends to be carried out without great difficulties. Despite this, there are certain validations, which tend to be more complex, such as checking calls to methods with parameters of type <em>varargs</em>.</p><p>If you don&rsquo;t know what <em>varargs</em> is, you can roughly say that it is, the &ldquo;&mldr;&rdquo; used in parameter declarations in methods, however, I recommend reading [this article](<a href=https://www.geeksforgeeks.org>https://www.geeksforgeeks.org</a> /variable-arguments-varargs-in-java/) for better understanding and viewing examples.</p><p>Despite not being highly complex, we do not always have control over how implementations will be invoked, especially when we use frameworks that make use of concepts such as <em>callbacks</em> or even <em>reflection</em>, widely used in the Spring framework.</p><p>Consider the following class declaration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Varargs</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>consume</span><span style=color:#f92672>(</span>String<span style=color:#f92672>...</span> values<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>join</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;, &#34;</span><span style=color:#f92672>,</span> values<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>We must consider that the <em>Varargs</em> class will be invoked by some <em>framework</em> over which we have no control, however, we need to ensure that, knowing the input value, the values ​​to be received in the implementation will also be known.</p><p>To try to exemplify a scenario, we can consider that the framework will convert values ​​from the consumption response of a <em>REST API</em>, perform calculations and consume the implementation with the result of this operation.</p><p>Although we cannot control the operations performed by this framework, we can manipulate the execution, sending known values ​​and validating if the implementation&rsquo;s consumption will be done as expected.</p><p><code>This type of test is very useful to guarantee that updates of this framework, do not compromise the behavior of our application, allowing constant and safe updates.</code></p><p>Imagining that the framework in use has a class that we cannot control, exemplified below by the <em>Invoker</em> class with <em>final</em> modifier, we must ensure that after the operation, when the method of the <em>Varargs</em> class is invoked, the same arguments are always received, based on the input parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Invoker</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Varargs varargs<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Invoker</span><span style=color:#f92672>(</span>Varargs varargs<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>varargs</span> <span style=color:#f92672>=</span> varargs<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>String<span style=color:#f92672>...</span> values<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> var newValue <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>values<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        newValue<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>values<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        varargs<span style=color:#f92672>.</span><span style=color:#a6e22e>consume</span><span style=color:#f92672>(</span>newValue<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span>0<span style=color:#f92672>]));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Considering everything that was said above, here are some examples of using our implementation by the <em>Invoker</em> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>final</span> var varargs <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Varargs<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> var invoker <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Invoker<span style=color:#f92672>(</span>varargs<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>invoker<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>invoker<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 1, 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>invoker<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2, 1, 2
</span></span></span></code></pre></div><p>Given the context, the following is a test implementation for scenario validation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testNoArgument</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var varargs <span style=color:#f92672>=</span> Mockito<span style=color:#f92672>.</span><span style=color:#a6e22e>spy</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Varargs<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> Invoker<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var stringArgumentCaptor <span style=color:#f92672>=</span> ArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>forClass</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    verify<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>consume</span><span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>capture</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> hasSize<span style=color:#f92672>(</span>1<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> containsInRelativeOrder<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;0&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testSingleArgument</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var varargs <span style=color:#f92672>=</span> Mockito<span style=color:#f92672>.</span><span style=color:#a6e22e>spy</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Varargs<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> Invoker<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var stringArgumentCaptor <span style=color:#f92672>=</span> ArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>forClass</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    verify<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>consume</span><span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>capture</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> hasSize<span style=color:#f92672>(</span>2<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> containsInRelativeOrder<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTwoArguments</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var varargs <span style=color:#f92672>=</span> Mockito<span style=color:#f92672>.</span><span style=color:#a6e22e>spy</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Varargs<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> Invoker<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>final</span> var stringArgumentCaptor <span style=color:#f92672>=</span> ArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>forClass</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    verify<span style=color:#f92672>(</span>varargs<span style=color:#f92672>).</span><span style=color:#a6e22e>consume</span><span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>capture</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> hasSize<span style=color:#f92672>(</span>3<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    assertThat<span style=color:#f92672>(</span>stringArgumentCaptor<span style=color:#f92672>.</span><span style=color:#a6e22e>getAllValues</span><span style=color:#f92672>(),</span> containsInRelativeOrder<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>This way we can guarantee that when <em>Invoker</em> receives certain input parameters, <em>Varargs</em> will always be consumed with the same values.</p><p>Although the example here is not from a real scenario, I believe that it can be easily adapted to various cases, thus serving as a reference.</p><p>If you have any questions or suggestions, don&rsquo;t hesitate to get in touch!</p></div><footer><div class=stats><ul class=tags><li><a class=article-terms-link href=https://www.rapatao.com/tags/java/>java</a></li><li><a class=article-terms-link href=https://www.rapatao.com/tags/mockito/>mockito</a></li><li><a class=article-terms-link href=https://www.rapatao.com/tags/junit/>junit</a></li><li><a class=article-terms-link href=https://www.rapatao.com/tags/tests/>tests</a></li></ul></div></footer></article><article class=post><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//rapatao-com.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article><div class=pagination><a href=https://www.rapatao.com/pt/posts/2020-05/what-is-it-like-working-in-the-it-area/ class="button left"><span>Como é trabalhar com TI?</span></a>
<a href=https://www.rapatao.com/pt/posts/2020-05/first-post/ class="button right"><span>O que vai aparecer por aqui?</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><a href=https://www.rapatao.com/posts/2022-07/gnupg-how-to-backup-and-restore-your-keys/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-lucas-seebacher-5599449.jpeg')"><img src=https://www.rapatao.com/images/posts/pexels-lucas-seebacher-5599449.jpeg alt="GnuPG: how to backup and restore your keys?"></a><header><h2><a href=https://www.rapatao.com/posts/2022-07/gnupg-how-to-backup-and-restore-your-keys/>GnuPG: how to backup and restore your keys?</a></h2><time class=published datetime="2022-07-31 12:00:00 -0300 -03">July 31, 2022</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2022-04/what-is-a-cdn-cdn-content-delivery-network/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-pixabay-163064.jpeg')"><img src=https://www.rapatao.com/images/posts/pexels-pixabay-163064.jpeg alt="What is a CDN (Content Delivery Network)?"></a><header><h2><a href=https://www.rapatao.com/posts/2022-04/what-is-a-cdn-cdn-content-delivery-network/>What is a CDN (Content Delivery Network)?</a></h2><time class=published datetime="2022-04-21 19:00:00 -0300 -03">April 21, 2022</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2022-02/load-balancing-what-is-a-load-balancer/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-brett-sayles-7146867.jpg')"><img src=https://www.rapatao.com/images/posts/pexels-brett-sayles-7146867.jpg alt="Load Balancing: What is a load balancer?"></a><header><h2><a href=https://www.rapatao.com/posts/2022-02/load-balancing-what-is-a-load-balancer/>Load Balancing: What is a load balancer?</a></h2><time class=published datetime="2022-02-05 20:00:00 -0300 -03">February 5, 2022</time></header></article><footer><a href=https://www.rapatao.com/posts/ class=button>See More</a></footer></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=skype:rapatao?userinfo target=_blank rel=noopener title=Skype class="fab fa-skype"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2022 rapatao.com<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.101.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=https://www.rapatao.com/js/highlight.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://www.rapatao.com/js/bundle.min.952cb158e7f5f2ed29e105fa1275ab4888785b2b0c0993cc5d3bd09f183bf078.js integrity="sha256-lSyxWOf18u0p4QX6EnWrSIh4WysMCZPMXTvQnxg78Hg="></script>
<script src=https://www.rapatao.com/js/add-on.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LDJ57WEQPH"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LDJ57WEQPH",{anonymize_ip:!0})}</script><script type=text/javascript data-cfasync=false>(function(){r="ETc1kQI5V_McDtndGw3mXb5gmI25TwGzYA_c-8d_BP5da4cZXpIUduQp0BajxOGlZ-b8WIR1Qlk8xkU",s=["w4xgw5AUwovCgsKTNsK5Tg==","w6IuDsOiw4tq","EsOYw5nCnMKpwqQUCFDDmWM=","wrggK8O2wq/CoBAV","GMO5wp/Cq1Jnw4A=","woIDDcOo","WMOHw54twok=","wqg2OMOm","w4fCmMKyw5cLwrXDoRlEwobDll0=","OB3DsyjCgWQKUsOzwrbCtnjCqA==","wp7CrsO0dcKECTnDvMKTw4rDn8KSw5t+w51oTsKgPx7DhsKtw63CocOFw5B1w7grXlw7w6/Ci8KresKB","w7LDqMKbdlVk","dg5UNMKSwq/Dq8Okwrg=","w7UTEMKCw7RTE8Oe","H8Ojwo7CqVMywp0a","w77CpsOhw7/Di2NgwqfDt8OfDcKjwq7DiMK1OcKZw6XCgxXDkGZ0w78LwqJ5ZsK6DsKDw5QxUMKwVgtqRMKwKMKSwpM=","PTXCisOpFMO9","XsORw5MGwobCrMKfT3grVhvDlsKqA8KFwoPCicK7Cg==","w6LDs8KKcmhlTw7CsRgZwoTCrA==","w7UoGsOqw45ywpo=","PgXDsz3Co3TDiMKWw65zGTDDnsOiwqk=","eMOCwoXCssK3w5ZpWMKkwrAKw6k=","wp/DiiXDocKdOg==","YsKew6w=","w5oCBsOtGE5EwqzCrTZ2G8OKcA==","GMOEw4XCisKowp8kBFHDn39l"],function(e,t){var n=function(t){for(;--t;)e.push(e.shift())};n(++t)}(s,225),e=function(t,n){t=t-0;var i,a,o=s[t];return e.IxDXuY===void 0&&(function(){var t=function(){var e;try{e=Function("return (function() {}.constructor(\"return this\")( ));")()}catch{e=window}return e},e=t(),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob||(e.atob=function(e){a=String(e).replace(/=+$/,""),s="";for(var t,s,i,a,o=0,r=0;t=a.charAt(r++);~t&&(i=o%4?i*64+t:t,o++%4)?s+=String.fromCharCode(255&i>>(-2*o&6)):0)t=n.indexOf(t);return s})}(),a=function(e,t){var n,i,a,r,d,s=[],o=0,c="",l="";e=atob(e);for(a=0,d=e.length;a<d;a++)l+="%"+("00"+e.charCodeAt(a).toString(16)).slice(-2);e=decodeURIComponent(l);for(n=0;n<256;n++)s[n]=n;for(n=0;n<256;n++)o=(o+s[n]+t.charCodeAt(n%t.length))%256,i=s[n],s[n]=s[o],s[o]=i;n=0,o=0;for(r=0;r<e.length;r++)n=(n+1)%256,o=(o+s[n])%256,i=s[n],s[n]=s[o],s[o]=i,c+=String.fromCharCode(e.charCodeAt(r)^s[(s[n]+s[o])%256]);return c},e.zXCIxf=a,e.dAXDIE={},e.IxDXuY=!![]),i=e.dAXDIE[t],i===void 0?(e.NskROM===void 0&&(e.NskROM=!![]),o=e.zXCIxf(o,n),e.dAXDIE[t]=o):o=i,o},n=window,n[e("0xe",")%!m")]=[[e("0x14","e7wt"),4805632],[e("0x5","JKVR"),0],[e("0x7","WMxT"),"0"],[e("0x4","EzJ^"),0],[e("0x2","ZOHU"),![]],[e("0x12","2aXP"),0],[e("0x11","0F%i"),!0]];var e,t,n,s,r,i=[e("0x13","!@qr"),e("0x18","5TfA")],o=0,a=function(){if(!i[o])return;t=n[e("0xc","e3Ks")][e("0x1","e7wt")](e("0x19","pfgE")),t[e("0x10","e3Ks")]=e("0x3","wzeH"),t[e("0xf","[m]O")]=!0;var s=n[e("0x16","xZo$")][e("0x0","[m]O")](e("0xa","ZOHU"))[0];t[e("0x6","NlFS")]=e("0x17","^@k6")+i[o],t[e("0xb","eXle")]=e("0x15","L)!0"),t[e("0xd","^@k6")]=function(){o++,a()},s[e("0x9","@lo)")][e("0x8","eXle")](t,s)};a()})()</script></div></body></html>