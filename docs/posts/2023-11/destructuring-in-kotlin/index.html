<!doctype html><html lang=en><head><meta charset=utf-8><title>Destructuring in Kotlin - rapatao.com</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=https://www.rapatao.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.rapatao.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.rapatao.com/favicon/favicon-16x16.png><link rel=manifest href=https://www.rapatao.com/favicon/site.webmanifest><link rel=mask-icon href=https://www.rapatao.com/favicon/safari-pinned-tab.svg color=#ffffff><link rel="shortcut icon" href=https://www.rapatao.com/favicon/favicon.ico><meta name=msapplication-config content="/favicon/browserconfig.xml"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.126.1"><meta itemprop=name content="Destructuring in Kotlin"><meta itemprop=description content="Destructuring is a programming concept that entails breaking down a complex data structure into its individual components and assigning these components to individual variables directly in a single statement.
As many other modern languages support it, but Kotlin, at least when compared to JavaScript, has a different behavior when used on data classes.
The purpose of this text is to talk about this difference, and how to prevent, as earlier as possible, mistakes that its usage could cause to your code."><meta itemprop=datePublished content="2023-11-10T17:00:00+00:00"><meta itemprop=dateModified content="2023-11-10T17:00:00+00:00"><meta itemprop=wordCount content="787"><meta itemprop=image content="https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg"><meta itemprop=keywords content="Kotlin"><meta property="og:url" content="https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/"><meta property="og:site_name" content="rapatao.com"><meta property="og:title" content="Destructuring in Kotlin"><meta property="og:description" content="Destructuring is a programming concept that entails breaking down a complex data structure into its individual components and assigning these components to individual variables directly in a single statement.
As many other modern languages support it, but Kotlin, at least when compared to JavaScript, has a different behavior when used on data classes.
The purpose of this text is to talk about this difference, and how to prevent, as earlier as possible, mistakes that its usage could cause to your code."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-10T17:00:00+00:00"><meta property="article:modified_time" content="2023-11-10T17:00:00+00:00"><meta property="article:tag" content="Kotlin"><meta property="og:image" content="https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg"><meta name=twitter:title content="Destructuring in Kotlin"><meta name=twitter:description content="Destructuring is a programming concept that entails breaking down a complex data structure into its individual components and assigning these components to individual variables directly in a single statement.
As many other modern languages support it, but Kotlin, at least when compared to JavaScript, has a different behavior when used on data classes.
The purpose of this text is to talk about this difference, and how to prevent, as earlier as possible, mistakes that its usage could cause to your code."><meta name=twitter:site content="@rapatao"><link rel=stylesheet href=https://www.rapatao.com/css/bundle.min.abec8fc14efbbe295ed4aff7e54c6826d504ca159ff3d50a0c00edff78a8e2c9.css integrity="sha256-q+yPwU77vile1K/35UxoJtUEyhWf89UKDADt/3io4sk="><link rel=stylesheet href=https://www.rapatao.com/css/add-on.css><link rel=alternate hreflang=en href=https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/><link rel=alternate hreflang=pt href=https://www.rapatao.com/pt/posts/2023-11/destructuring-em-kotlin/></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=https://www.rapatao.com/ class=nav>rapatao.com</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=https://www.rapatao.com/posts/ class="nav link"><i class='far fa-newspaper'></i> Blog</a>
<a href=https://www.rapatao.com/resume/ class="nav link"><i class='far fa-file-alt'></i> Resume</a>
<a href=https://www.rapatao.com/json/ class="nav link"><i class='far fa-file-code'></i> JSON Formatter & Minifier</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu><a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=en>en</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=en class="nav link active">English (en)</a>
<a href=https://www.rapatao.com/pt/posts/2023-11/destructuring-em-kotlin/ lang=pt class="nav link">Português (pt)</a></menu><menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Destructuring%20in%20Kotlin&amp;url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f&amp;title=Destructuring%20in%20Kotlin" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f&amp;title=Destructuring%20in%20Kotlin" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by &amp;body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=https://www.rapatao.com/><img src=https://www.rapatao.com/images/avatar-pixel.gif class=square width=100 alt="Luiz H. Rapatão"></a><header><h1>Luiz H. Rapatão</h1></header><main><p>Senior Software Engineer</p></main><footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/>Destructuring in Kotlin</a></h2></div><div class=meta><time datetime="2023-11-10 17:00:00 +0000 UTC">November 10, 2023</time><p>4-Minute Read</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Destructuring%20in%20Kotlin&amp;url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f&amp;title=Destructuring%20in%20Kotlin" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f&amp;title=Destructuring%20in%20Kotlin" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by &amp;body=https%3a%2f%2fwww.rapatao.com%2fposts%2f2023-11%2fdestructuring-in-kotlin%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><a href=https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg alt="Destructuring in Kotlin"></a><p><strong>Destructuring</strong> is a programming concept that entails breaking down a complex data structure into its individual
components and assigning these components to individual variables directly in a single statement.</p><p>As many other modern languages support it, but <code>Kotlin</code>, at least when compared to <code>JavaScript</code>, has a different
behavior when used on data classes.</p><p>The purpose of this text is to talk about this difference, and how to prevent, as earlier as possible, mistakes that its
usage could cause to your code.</p><h2 id=understanding-destructuring-declarations>Understanding Destructuring Declarations</h2><p>Destructuring allows you to decompose an object into a set of variables. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Item</span>(<span style=color:#66d9ef>val</span> name: String, <span style=color:#66d9ef>val</span> price: Double)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> rice = Item(<span style=color:#e6db74>&#34;Rice&#34;</span>, <span style=color:#ae81ff>2.13</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>name, price) = rice
</span></span></code></pre></div><p>In this code, a new <code>Item</code> instance was created and destructured into two variables that represent its attributes.</p><p>It was achieved by using the following statement:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>name, price) = rice
</span></span></code></pre></div><p>In this case, a <code>data class</code> was used, but it is also possible to use it in other data structures, like Arrays,
Lists or other classes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> list = listOf(<span style=color:#e6db74>&#34;element 1&#34;</span>, <span style=color:#e6db74>&#34;element 2&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>l1, l2) = list
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> array = arrayOf(<span style=color:#e6db74>&#34;element 1&#34;</span>, <span style=color:#e6db74>&#34;element 2&#34;</span>, <span style=color:#e6db74>&#34;element 3&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>a1, a2) = array
</span></span></code></pre></div><p>As it was possible to notice on the <code>array</code> example, it isn&rsquo;t mandatory to have all elements assigned to variables.
Non-mapped values are simply ignored.</p><blockquote><p>Important: mapping more elements than existing on the list will throw the <code>java.lang.ArrayIndexOutOfBoundsException</code></p></blockquote><h2 id=the-order-matters>The Order Matters</h2><p>The most significant difference between <strong>destructuring</strong> in <code>Kotlin</code>, when compared to <code>JavaScript</code> is that the
ordering of the elements is important.</p><p>In <code>JavaScript</code>, as it is in <code>Kotlin</code>, destructuring a collection is order-based, which means that the first variable
declaration will be assigned to the first element of the collection, the second variable to the second element, and so
on…</p><p>The difference between those two languages is on destructuring objects, where in <code>JavaScript</code>, it extracts the
properties from the object using its declared name and <code>Kotlin</code> extracts based on the declaration order.</p><p>In <code>JavaScript</code>, by having the following object:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rice</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Rice&#34;</span>, <span style=color:#a6e22e>price</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2.13</span>};
</span></span></code></pre></div><p>It is possible to destruct it by using both statement, and both of them will always have the same result:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> {<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>price</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>rice</span>; <span style=color:#75715e>// name = &#34;Rice&#34;, price = 2.13
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> {<span style=color:#a6e22e>price</span>, <span style=color:#a6e22e>name</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>rice</span>; <span style=color:#75715e>// price = 2.13, name = &#34;Rice&#34;
</span></span></span></code></pre></div><p>In <code>Kotlin</code>, by having the <code>Rice</code> object:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Item</span>(<span style=color:#66d9ef>val</span> name: String, <span style=color:#66d9ef>val</span> price: Double)
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> rice = Item(<span style=color:#e6db74>&#34;Rice&#34;</span>, <span style=color:#ae81ff>2.13</span>)
</span></span></code></pre></div><p>The declaration order matters when destructuring it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>name, price) = rice <span style=color:#75715e>// name = &#34;Rice&#34;, price = 2.13
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>price, name) = rice <span style=color:#75715e>// price = &#34;Rice&#34;, name = 2.13
</span></span></span></code></pre></div><p>As you can see, the order in which each attribute of the <code>Item</code> is declared directly impacts its assignation when
destructuring it.</p><h2 id=type-enforcement>Type Enforcement</h2><p>As you can imagine, this can cause some unwanted behavior on your application by using it, and you could be thinking if
it is possible to change its behavior, and the answer is: <code>no</code>.</p><p>Although it isn&rsquo;t possible to change, understanding this behavior can help you prevent issues related to it, by having
test cases that explicitly cover mistakenly changes related to the used fields and also, when possible, enforcing the
data type.</p><p>Enforcing data type, makes changes like this noticeable at compilation time.</p><p>By changing the attribution shown earlier in this text, you can have a compilation error if the used data class has its
field ordering changed.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>val</span> <span style=color:#960050;background-color:#1e0010>(</span>name: String, price: Double) = rice <span style=color:#75715e>// name = &#34;Rice&#34;, price = 2.13
</span></span></span></code></pre></div><p>So, if someone changes the <code>Item</code> to have the <code>price</code> attribute declared first, the typing will not match, and the
compilation will not succeed.</p><p>As you can imagine, it didn&rsquo;t prevent all cases because if these two fields have the same data type, the compilation
will succeed, since they still match. For cases like this, having good test cases is the only effective solution.</p><p>Enforcing data type only brings to your code another validation, which can be useful and, usually, easier to identify
the exact part of the code that got impacted by a change.</p><h2 id=using-it-wisely>Using it wisely</h2><p>While destructuring declarations can make code more brief and expressive, avoid overusing them. Overuse can make the
code harder to understand, especially for those not familiar with the feature.</p><p>Always prioritize readability and maintainability, and remember, just because you can, doesn&rsquo;t always mean you should.</p><p>In conclusion, Kotlin&rsquo;s destructuring declarations are a great tool to simplify your code and make it more expressive
when used judiciously. They provide a way to destructure an object into several variables, making the code more concise
and readable. However, like all tools, they should be used appropriately and with an understanding of their underlying
mechanics.</p></div><footer><div class=stats><ul class=tags><li><a class=article-terms-link href=https://www.rapatao.com/tags/kotlin/>kotlin</a></li></ul></div></footer></article><article class=post><div id=reaktions></div><script lang=application/javascript defer src=https://reaktions.rapatao.com/reaktions.js></script><noscript>Please enable JavaScript to react with this post</noscript></article><div class=pagination><a href=https://www.rapatao.com/posts/2023-10/contract-first-vs-code-first-api-documentation/ class="button right"><span>Contract-First VS Code-First API Documentation</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><a href=https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/pexels-cottonbro-studio-3944307.jpg alt="Destructuring in Kotlin"></a><header><h2><a href=https://www.rapatao.com/posts/2023-11/destructuring-in-kotlin/>Destructuring in Kotlin</a></h2><time class=published datetime="2023-11-10 17:00:00 +0000 UTC">November 10, 2023</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2023-10/contract-first-vs-code-first-api-documentation/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/pexels-rdne-stock-project-7841410.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/pexels-rdne-stock-project-7841410.jpg alt="Contract-First VS Code-First API Documentation"></a><header><h2><a href=https://www.rapatao.com/posts/2023-10/contract-first-vs-code-first-api-documentation/>Contract-First VS Code-First API Documentation</a></h2><time class=published datetime="2023-10-08 09:00:00 +0000 UTC">October 8, 2023</time></header></article><article class=mini-post><a href=https://www.rapatao.com/posts/2023-09/cap-theorem/ class=image style="--bg-image:url('https://www.rapatao.com/images/posts/light-bulds.jpg')"><img class=stretchV src=https://www.rapatao.com/images/posts/light-bulds.jpg alt="CAP Theorem"></a><header><h2><a href=https://www.rapatao.com/posts/2023-09/cap-theorem/>CAP Theorem</a></h2><time class=published datetime="2023-09-22 09:00:00 +0000 UTC">September 22, 2023</time></header></article><footer><a href=https://www.rapatao.com/posts/ class=button>See More</a></footer></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/rapatao target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//linkedin.com/in/rapatao target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//instagram.com/luizrapatao target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/rapatao target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:rapatao@rapatao.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2023 rapatao.com<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.126.1 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=https://www.rapatao.com/js/bundle.min.16c4006ade78f79e839681c2846a091e2385b4b076497677a08afc2dfda951b4.js integrity="sha256-FsQAat54956DloHChGoJHiOFtLB2SXZ3oIr8Lf2pUbQ="></script><script src=https://www.rapatao.com/js/add-on.js></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8575ea838221496eb4ac5f867d0d5d8f"}'></script></div></body></html data-check="rapatao.com">